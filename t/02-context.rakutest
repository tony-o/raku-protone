use Test;
use Protone;
use Protone::Context;

plan 2;

my $ctx = Protone::Context.new;

$ctx.compile('hello', :code('hello {{name}}.'));

ok $ctx.run('hello', name => 'tony-o') eq 'hello tony-o.';

$ctx.register('flip', -> $s { $s.flip; });

$ctx.compile('olleh', :code('hello {{flip(name)}}.'));

ok $ctx.run('olleh', name => 'tony-o') eq 'hello o-ynot.';
